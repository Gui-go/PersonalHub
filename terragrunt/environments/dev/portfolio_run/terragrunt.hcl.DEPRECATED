locals {
  parent_vars = read_terragrunt_config("../terragrunt.hcl")
}

terraform {
  source = "${get_repo_root()}/terragrunt/modules//app_run"
}

dependency "storage" {
  config_path = "../storage"
#   skip_outputs = true
}

inputs = {
  project_id   = local.parent_vars.inputs.project_id
  region       = local.parent_vars.inputs.region
  app_name     = "portfolio-app"
  ingress      = "INGRESS_TRAFFIC_ALL"
  repo_name    = dependency.storage.outputs.repo_id
  port         = 3000
  cpu          = "1"
  memory       = "512Mi" # "1024Mi" "2048Mi"
  min_instance = 0
  max_instance = 1
#   run_connector
  egress       = "ALL_TRAFFIC"
  timeout      = "360s"
#   service_account
}
